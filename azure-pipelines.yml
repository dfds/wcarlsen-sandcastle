# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

resources:
  containers:
    - container: cd
      image: wcarlsen/saml2aws-kubernetes-service-connection:latest
      env:
        SAML2AWS_PASSWORD: $(SAML2AWS_PASSWORD)

steps:

- task: KubernetesManifest@0
  inputs:
    action: 'deploy'
    kubernetesServiceConnection: 'Kubernetes-wicar-test'
    namespace: 'sandbox-wicar-ypvvv'
    manifests: '$(System.DefaultWorkingDirectory)/k8s'
    containers: cd